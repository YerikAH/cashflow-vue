import{_ as h,r as $,o as i,c as _,a as e,b as S,w as f,v as D,F as E,p as I,d as M,e as P,f as H,t as A,g as R,h as N,u as p,n as U,i as G,j as T,k as w,l as x,m as V,q as B,s as X,T as z,x as g}from"./index.b3055c9d.js";const J=t=>(I("data-v-ba63e39a"),t=t(),M(),t),O={class:"header"},j={class:"resume"},q={class:"movements"},W=J(()=>e("div",{class:"grip"},null,-1)),K=[W],Q={class:"body"},Y={__name:"Layout",setup(t){const o=$(!1);return(s,c)=>(i(),_(E,null,[e("div",O,[S(s.$slots,"header",{},void 0,!0)]),e("div",j,[S(s.$slots,"resume",{},void 0,!0)]),e("div",q,[e("div",{class:"head",onClick:c[0]||(c[0]=u=>o.value=!o.value)},K),f(e("div",Q,[S(s.$slots,"movements",{},void 0,!0)],512),[[D,o.value]])])],64))}},Z=h(Y,[["__scopeId","data-v-ba63e39a"]]),ee={methods:{reload(){location.reload(!0)}}},L=t=>(I("data-v-a7c3f6af"),t=t(),M(),t),te=L(()=>e("h1",null,[H("Cash "),e("span",null,"Flow")],-1)),oe=L(()=>e("span",null,null,-1));function se(t,o,s,c,u,n){return i(),_("header",null,[e("img",{onClick:o[0]||(o[0]=(...r)=>n.reload&&n.reload(...r)),src:P,alt:"logo-cute"}),te,oe])}const ne=h(ee,[["render",se],["__scopeId","data-v-a7c3f6af"]]),ae=new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}),le={props:{totalLabel:{type:String},label:{type:String,default:null},amount:{type:Number,default:null},totalAmount:{type:Number}},computed:{amountVisual(){return this.amount!==null?this.amount:this.totalAmount},labelVisual(){return this.label!==null?this.label:this.totalLabel},amountCurrency(){return ae.format(this.amountVisual)}}},ce={class:"graphic"},ue={class:"action"};function re(t,o,s,c,u,n){return i(),_("main",null,[e("p",null,A(n.labelVisual),1),e("h1",null,A(n.amountCurrency),1),e("div",ce,[S(t.$slots,"graphic",{},void 0,!0)]),e("div",ue,[S(t.$slots,"action",{},void 0,!0)])])}const ie=h(le,[["render",re],["__scopeId","data-v-1ef1dc50"]]),de="/cashflow-vue/assets/trash.4f01394e.svg",me={class:"movement"},_e={class:"content"},ve={class:"action"},pe={__name:"Movement",props:{title:{type:String},description:{type:String},id:{type:Number},amount:{type:Number}},emits:["remove"],setup(t,{emit:o}){const s=t,c=new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}),{id:u,amount:n,description:r,title:d}=R(s),v=N(()=>c.format(n.value)),l=N(()=>n.value<0),a=()=>{o("remove",u.value)};return(m,b)=>(i(),_("div",me,[e("div",_e,[e("h4",null,A(p(d)),1),e("p",null,A(p(r)),1)]),e("div",ve,[e("img",{src:de,alt:"clean",onClick:a}),e("p",{class:U({red:p(l),green:!p(l)})},A(p(v)),3)])]))}},he=h(pe,[["__scopeId","data-v-e7a8eaee"]]),fe=t=>(I("data-v-5ad9a6ce"),t=t(),M(),t),$e={class:"movements"},ye=fe(()=>e("h2",{class:"title"},"Historial",-1)),be={class:"content"},ge={__name:"Index",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(t,{emit:o}){const s=t,{movements:c}=R(s),u=n=>{o("remove",n)};return(n,r)=>(i(),_("div",$e,[ye,e("div",be,[(i(!0),_(E,null,G(p(c),({id:d,title:v,description:l,amount:a})=>(i(),T(he,{key:d,id:d,title:v,description:l,amount:a,onRemove:u},null,8,["id","title","description","amount"]))),128))])]))}},we=h(ge,[["__scopeId","data-v-5ad9a6ce"]]),xe="/cashflow-vue/assets/close-icon.c67e0a46.svg",Se=t=>(I("data-v-1d1dc70f"),t=t(),M(),t),Ie={class:"modal"},Me=Se(()=>e("p",null,"Nuevo movimiento",-1)),Ce={class:"body"},ke={__name:"Modal",emits:["close"],setup(t,{emit:o}){const s=()=>{o("close")};return(c,u)=>(i(),_("div",Ie,[e("div",{class:"head"},[Me,e("img",{onClick:s,src:xe,alt:"close"})]),e("div",Ce,[S(c.$slots,"default",{},void 0,!0)])]))}},Ae=h(ke,[["__scopeId","data-v-1d1dc70f"]]),y=t=>(I("data-v-370f5d47"),t=t(),M(),t),Ne=["onSubmit"],Ve={class:"field"},De=y(()=>e("label",null,"Title",-1)),Ee={class:"field"},Re=y(()=>e("label",null,"Amount",-1)),Te={class:"field"},Be=y(()=>e("label",null,"Description",-1)),Le={class:"field"},Fe=y(()=>e("label",null,"Movement type",-1)),Pe={class:"radio-label"},He=y(()=>e("span",null,"Entrance",-1)),Ue={class:"radio-label"},Ge=y(()=>e("span",null,"Spend",-1)),Xe=y(()=>e("div",{class:"action"},[e("button",null,"add movement")],-1)),ze={__name:"Action",emits:["create"],setup(t,{emit:o}){const s=$(!1),c=$(""),u=$(0),n=$(""),r=$("Enter"),d=()=>{s.value=!s.value,o("create",{title:c.value,description:n.value,amount:r.value==="Enter"?u.value:-u.value,time:new Date,id:new Date}),c.value="",n.value="",u.value=0,r.value="Enter"};return(v,l)=>(i(),_(E,null,[e("button",{onClick:l[0]||(l[0]=a=>s.value=!0)},"Add movement"),(i(),T(z,{to:"#app"},[f(w(Ae,{onClose:l[6]||(l[6]=a=>s.value=!1)},{default:x(()=>[e("form",{onSubmit:X(d,["prevent"])},[e("div",Ve,[De,f(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=a=>c.value=a)},null,512),[[V,c.value]])]),e("div",Ee,[Re,f(e("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=a=>u.value=a)},null,512),[[V,u.value]])]),e("div",Te,[Be,f(e("textarea",{rows:"4","onUpdate:modelValue":l[3]||(l[3]=a=>n.value=a)},null,512),[[V,n.value]])]),e("div",Le,[Fe,e("label",Pe,[f(e("input",{type:"radio","onUpdate:modelValue":l[4]||(l[4]=a=>r.value=a),value:"Enter"},null,512),[[B,r.value]]),He]),e("label",Ue,[f(e("input",{type:"radio","onUpdate:modelValue":l[5]||(l[5]=a=>r.value=a),value:"Spend"},null,512),[[B,r.value]]),Ge])]),Xe],40,Ne)]),_:1},512),[[D,s.value]])]))],64))}},Je=h(ze,[["__scopeId","data-v-370f5d47"]]),Oe=t=>(I("data-v-ea3cc953"),t=t(),M(),t),je=["y1","y2"],qe=["points"],We=["x1","x2"],Ke=Oe(()=>e("p",null,"Last 30 days",-1)),Qe={__name:"Graphic",props:{amounts:{type:Array,default:()=>[]}},setup(t){const o=t,{amounts:s}=R(o),c=a=>{const m=Math.min(...s.value),b=Math.max(...s.value),C=a+Math.abs(m),k=Math.abs(b)+Math.abs(m);return 200-C*100/k*2},u=N(()=>c(0)),n=N(()=>{const a=s.value.length;return s.value.reduce((m,b,C)=>{const k=300/a*(C+1),F=c(b);return`${m} ${k},${F}`},"0,100")}),r=$(!1),d=$(0),v=({target:a,touches:m})=>{r.value=!0;const b=a.getBoundingClientRect().width,C=a.getBoundingClientRect().x,k=m[0].clientX;d.value=(k-C)*300/b},l=()=>{r.value=!1};return(a,m)=>(i(),_("div",null,[(i(),_("svg",{viewBox:"0 0 300 200",onTouchstart:v,onTouchmove:v,onTouchend:l},[e("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:p(u),x2:"300",y2:p(u)},null,8,je),e("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:p(n)},null,8,qe),f(e("line",{"stroke-width":"2",stroke:"#04b500",x1:d.value,y1:"0",x2:d.value,y2:"200"},null,8,We),[[D,r.value]])],32)),Ke]))}},Ye=h(Qe,[["__scopeId","data-v-ea3cc953"]]),Ze={components:{Layout:Z,Header:ne,Resume:ie,Movements:we,Action:Je,Graphic:Ye},data(){return{amount:null,label:null,movements:[]}},computed:{amounts(){const t=this.movements.filter(o=>{const s=new Date,c=s.setDate(s.getDate()-30);return o.time>c}).map(o=>o.amount);return t.map((o,s)=>t.slice(0,s).reduce((u,n)=>u+n,0))},totalAmount(){return this.movements.reduce((t,o)=>t+o.amount,0)}},mounted(){const t=JSON.parse(localStorage.getItem("movements"));Array.isArray(t)&&(this.movements=t.map(o=>({...o,time:new Date(o.time)})))},methods:{create(t){this.movements.push(t),this.save()},remove(t){const o=this.movements.findIndex(s=>s.id===t);this.movements.splice(o,1),this.save()},save(){localStorage.setItem("movements",JSON.stringify(this.movements))}}};function et(t,o,s,c,u,n){const r=g("Header"),d=g("Graphic"),v=g("Action"),l=g("Resume"),a=g("Movements"),m=g("Layout");return i(),T(m,null,{header:x(()=>[w(r)]),resume:x(()=>[w(l,{label:u.label,"total-amount":n.totalAmount,amount:u.amount,"total-label":"Ahorro total"},{graphic:x(()=>[w(d,{amounts:n.amounts},null,8,["amounts"])]),action:x(()=>[w(v,{onCreate:n.create},null,8,["onCreate"])]),_:1},8,["label","total-amount","amount"])]),movements:x(()=>[w(a,{movements:u.movements,onRemove:n.remove},null,8,["movements","onRemove"])]),_:1})}const ot=h(Ze,[["render",et]]);export{ot as default};
